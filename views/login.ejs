<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login | Farmcure</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body class="flex flex-col min-h-screen bg-cover bg-center bg-[#dbeaff]">
  <!-- Main Content -->
  <div class="flex-1 flex justify-center items-center">
    <div class="relative bg-white w-[90%] max-w-md h-[460px] backdrop-blur-xl border-2 border-white/50 rounded-2xl shadow-xl flex justify-center items-center overflow-hidden scale-95 opacity-0 transition-all duration-700 ease-out"
         id="wrapper"
         data-aos="zoom-in">

      <!-- Close Icon (go back home) -->
      <a href="/" class="absolute top-0 right-0 w-11 h-11 bg-[#162938] text-white flex justify-center items-center rounded-bl-2xl text-2xl cursor-pointer z-10 hover:scale-110 transition-transform duration-300">
        <ion-icon name="close"></ion-icon>
      </a>
      
      <!-- Login Form -->
      <div class="w-full p-10">
        <h2 class="text-2xl font-bold text-[#162938] text-center mb-6" data-aos="fade-down" data-aos-delay="200">Login</h2>

        <!-- Flash Messages -->
        <div class="max-w-lg mx-auto mt-6">
          <% if (error && error.length > 0) { %>
            <div class="bg-red-100 text-red-600 text-sm p-3 rounded mb-4 text-center">
              <%= error %>
            </div>
          <% } %>
          <% if (success && success.length > 0) { %>
            <div class="bg-green-100 text-green-600 text-sm p-3 rounded mb-4 text-center">
              <%= success %>
            </div>
          <% } %>
        </div>
      

        <form action="/users/login" method="POST">
          <!-- Email -->
          <div class="relative w-full h-12 border-b-2 border-[#162938] mb-8" data-aos="fade-up" data-aos-delay="300">
            <span class="absolute right-2 text-xl text-[#162938] top-3">
              <ion-icon name="mail"></ion-icon>
            </span>
            <input id="emailInput" type="email" name="username" placeholder=" " required class="peer w-full h-full bg-transparent border-none outline-none px-1 text-[#162938] font-semibold" />
            <label id="emailLabel" class="absolute left-1 top-1/2 -translate-y-1/2 text-gray-500 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-gray-400 peer-focus:top-[-5px] peer-focus:text-black transition-all">Email</label>
          </div>
          
          <!-- Password -->
          <div class="relative w-full h-12 border-b-2 border-[#162938] mb-8" data-aos="fade-up" data-aos-delay="400">
            <span class="absolute right-2 text-xl text-[#162938] top-3">
              <ion-icon name="lock-closed"></ion-icon> 
            </span>
            <input id="passwordInput" type="password" name="password" placeholder=" " required class="peer w-full h-full bg-transparent border-none outline-none px-1 text-[#162938] font-semibold" />
            <label id="passwordLabel" class="absolute left-1 top-1/2 -translate-y-1/2 text-gray-500 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-gray-400 peer-focus:top-[-5px] peer-focus:text-black transition-all">Password</label>
          </div>
          
          <!-- Remember -->
          <div class="flex justify-between items-center text-sm text-[#162938] mb-6" data-aos="fade-up" data-aos-delay="500">
            <label class="flex items-center space-x-1">
              <input type="checkbox" class="accent-[#162938]"> <span>Remember me</span>
            </label>
            <a href="#" class="hover:underline">Forgot password?</a>
          </div>
          
          <!-- Button -->
          <button type="submit" class="w-full h-11 bg-[#162938] text-white rounded-md font-medium hover:bg-[#1e3a56] transform hover:scale-[1.02] transition-transform duration-300" data-aos="fade-up" data-aos-delay="600">Login</button>
          
          <!-- Register Link -->
          <div class="text-sm text-[#162938] text-center font-medium mt-6" data-aos="fade-up" data-aos-delay="700">
            <p>Don’t have an account? 
              <a href="/users/register" class="font-semibold hover:underline text-blue-600">Register</a>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white text-center py-4" data-aos="fade-up">
    <p>© 2025 Farmcure | All Rights Reserved</p>
  </footer>

  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({
      duration: 800,
      once: true,
    });

    // Fade in on load
    window.addEventListener("load", () => {
      const wrapper = document.getElementById("wrapper");
      setTimeout(() => {
        wrapper.classList.remove("scale-95", "opacity-0");
        wrapper.classList.add("scale-100", "opacity-100");
      }, 200);
    });

    // Hide Email label after value is entered and input loses focus
    const emailInput = document.getElementById("emailInput");
    const emailLabel = document.getElementById("emailLabel");
    const updateEmailLabelVisibility = () => {
      if (emailInput.value.trim() !== "" && document.activeElement !== emailInput) {
        emailLabel.style.display = "none";
      } else {
        emailLabel.style.display = "";
      }
    };
    emailInput.addEventListener("blur", updateEmailLabelVisibility);
    emailInput.addEventListener("input", updateEmailLabelVisibility);
    emailInput.addEventListener("focus", updateEmailLabelVisibility);
    // Initialize state on page load (in case browser autofills)
    updateEmailLabelVisibility();

    // Hide Password label after value is entered and input loses focus
    const passwordInput = document.getElementById("passwordInput");
    const passwordLabel = document.getElementById("passwordLabel");
    const updatePasswordLabelVisibility = () => {
      if (passwordInput.value.trim() !== "" && document.activeElement !== passwordInput) {
        passwordLabel.style.display = "none";
      } else {
        passwordLabel.style.display = "";
      }
    };
    passwordInput.addEventListener("blur", updatePasswordLabelVisibility);
    passwordInput.addEventListener("input", updatePasswordLabelVisibility);
    passwordInput.addEventListener("focus", updatePasswordLabelVisibility);
    updatePasswordLabelVisibility();
  </script>
</body>
</html>
